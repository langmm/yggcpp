cmake_minimum_required(VERSION @CMAKE_MINIMUM_REQUIRED_VERSION@)
message(DEBUG "Checking for external language: @language@ (CMAKE_GENERATOR = ${CMAKE_GENERATOR})")
project(check_language_@language@)
enable_language(@language@)
list(APPEND CMAKE_MODULE_PATH "@CMAKE_CURRENT_FUNCTION_LIST_DIR@")
set(LANGUAGE @language@)
set(COMPILER_FILE "@fcompiler@")
set(TARGET_FILE "@flibraries@")
set(COMPILER_VAR "CMAKE_${LANGUAGE}_COMPILER")
if(COMPILER_VAR)
  message(STATUS "Located external compiler for ${LANGUAGE}")
  message(STATUS "${COMPILER_VAR} = ${${COMPILER_VAR}}")
  message(STATUS "CMAKE_GENERATOR = ${CMAKE_GENERATOR})")
  if(COMPILER_FILE)
    file(WRITE ${COMPILER_FILE} ${${COMPILER_VAR}})
  endif()
endif()
if(TARGET_FILE)
  include(AddTargetsFromFile)
  # TODO: Find stdc++ library for fortran?
  set(generate_args)
  if (MSVC_AND_GNU_BUILD)
    set(generate_args FULL_LIBRARIES) # CREATE_LIB)
  endif()
  generate_implicit_libraries_file(
    ${TARGET_FILE} ${generate_args}
  )
endif()
