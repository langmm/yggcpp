cmake_minimum_required(VERSION @CMAKE_MINIMUM_REQUIRED_VERSION@)
message(DEBUG "find_gfortran: TARGET = @target_name@")
message(DEBUG "find_gfortran: CMAKE_GENERATOR = ${CMAKE_GENERATOR}")
project(@target_name@_FIND_Fortran LANGUAGES C CXX Fortran)
enable_language(Fortran)
set(CMAKE_MODULE_PATH "${CMAKE_MODULE_PATH};@CMAKE_CURRENT_FUNCTION_LIST_DIR@")
set(TARGET_FILE @external_target_file@)
message(DEBUG "find_gfortran: TARGET_FILE = ${TARGET_FILE}")
message(DEBUG "find_gfortran: CMAKE_GNUtoMS = ${CMAKE_GNUtoMS}")
message(DEBUG "find_gfortran: MSVC_AND_GNU_BUILD = ${MSVC_AND_GNU_BUILD}")
message(DEBUG "find_gfortran: CMAKE_Fortran_IMPLICIT_LINK_LIBRARIES = ${CMAKE_Fortran_IMPLICIT_LINK_LIBRARIES}")
set(IMPLICIT_LINK_LIBRARIES gfortran gcc)
set(IMPLICIT_LINK_DIRECTORIES ${CMAKE_Fortran_IMPLICIT_LINK_DIRECTORIES})
message(DEBUG "find_gfortran: IMPLICIT_LINK_LIBRARIES = ${IMPLICIT_LINK_LIBRARIES}")
message(DEBUG "find_gfortran: IMPLICIT_LINK_DIRECTORIES = ${IMPLICIT_LINK_DIRECTORIES}")

include(AddTargetsFromFile)
# TODO: Find stdc++ library?
set(generate_args)
if (MSVC_AND_GNU_BUILD)
  set(generate_args FULL_LIBRARIES) # CREATE_LIB)
endif()
generate_target_file(
    ${TARGET_FILE} NO_CONFIG ${generate_args}
    EXTRA_LIBRARIES ${IMPLICIT_LINK_LIBRARIES}
    EXTRA_DIRECTORIES ${IMPLICIT_LINK_DIRECTORIES})
